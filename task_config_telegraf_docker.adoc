---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Configuración del recopilador de datos de Docker 
---
= Recopilador de datos de Docker
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights utiliza este recopilador de datos para recopilar métricas de Docker.



== Instalación

. Desde *Observabilidad > Recopiladores*, haga clic en *+Recopilador de datos*.  Seleccione Docker.
+
Si no ha configurado un agente para la recopilación, se le solicitará que lo haga.link:task_config_telegraf_agent.html["instalar un agente"] en su inquilino.

+
Si ya tiene un agente configurado, seleccione el sistema operativo o la plataforma adecuados y haga clic en *Continuar*.

. Siga las instrucciones en la pantalla de configuración de Docker para configurar el recopilador de datos.  Las instrucciones varían según el tipo de sistema operativo o plataforma que esté utilizando para recopilar datos.


image:DockerDCConfigLinux.png["Configuración de Docker"]



== Configuración

El complemento de entrada Telegraf para Docker recopila métricas a través de un socket UNIX específico o un punto final TCP.



=== Compatibilidad

La configuración se desarrolló con la versión 1.12.6 de Docker.



=== Configuración



=== Acceder a Docker a través de un socket UNIX

Si el agente Telegraf se ejecuta en hardware, agregue el usuario Unix de Telegraf al grupo Unix de Docker ejecutando lo siguiente:

 sudo usermod -aG docker telegraf
Si el agente Telegraf se ejecuta dentro de un pod de Kubernetes, exponga el socket Docker Unix asignándolo al pod como un volumen y luego montando ese volumen en /var/run/docker.sock.  Por ejemplo, agregue lo siguiente al PodSpec:

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
Luego, agregue lo siguiente al contenedor:

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
Tenga en cuenta que el instalador de Data Infrastructure Insights proporcionado para la plataforma Kubernetes se encarga de esta asignación automáticamente.



=== Acceder a Docker a través de un punto final TCP

De forma predeterminada, Docker utiliza el puerto 2375 para acceso sin cifrar y el puerto 2376 para acceso cifrado.



== Objetos y contadores

Se recogen los siguientes objetos y sus contadores:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Puntos de datos: 


| Motor Docker | Motor Docker de espacio de nombres | Nombre del nodo IP del nodo UUID del nodo SO del nodo Clúster de Kubernetes Versión de Docker Unidad | Contenedores de memoria Contenedores en pausa Contenedores en ejecución Contenedores detenidos CPU Rutinas Go Imágenes Eventos de escucha Descriptores de archivos Datos disponibles Datos totales utilizados Metadatos disponibles Metadatos totales utilizados Tamaño de bloque del pool 


| Contenedor Docker | Espacio de nombres Nombre del contenedor Motor Docker | Hash de contenedor de Kubernetes Puertos de contenedor de Kubernetes Conteo de reinicios de contenedor de Kubernetes Ruta de mensaje de terminación de contenedor de Kubernetes Política de mensaje de terminación de contenedor de Kubernetes Período de gracia de terminación de pod de Kubernetes Imagen de contenedor Estado de contenedor Versión de contenedor Nombre de nodo Ruta de registro de contenedor de Kubernetes Nombre de contenedor de Kubernetes Tipo de Docker de Kubernetes Nombre de pod de Kubernetes Espacio de nombres de pod de Kubernetes UID de pod de Kubernetes ID de Sandbox de Kubernetes IP de nodo UUID de nodo Versión de Docker Configuración de E/S de Kubernetes vista Origen de configuración de E/S de Kubernetes SCC de E/S de OpenShift Descripción de Kubernetes Nombre para mostrar de Kubernetes Etiquetas de OpenShift Hash de plantilla de pod de servicio de Kompose Controlador de revisión Generación de plantilla de pod de hash Esquema de licencia Fecha de compilación Licencia de esquema Nombre de esquema URL de esquema URL de VCS de esquema Proveedor de esquema Versión de esquema Mantenedor de versión de esquema Pod de cliente Nombre de pod de StatefulSet de Kubernetes Inquilino Arquitectura de Webconsole URL de origen autorizada Fecha de compilación Host de compilación de RH Componente de RH Ámbito de distribución Instalar Versión Ejecutar Resumen Desinstalar VCS Ref. VCS Tipo Proveedor Versión Estado de salud ID del contenedor | Memoria activa Memoria anónima Memoria activa Archivo caché Memoria Límite jerárquico Memoria inactiva Memoria anónima Límite de memoria de archivo inactivo Archivo asignado a memoria Uso máximo de memoria Fallo de página de memoria Fallo mayor de página de memoria Memoria paginada de entrada Memoria paginada de salida Tamaño de conjunto residente de memoria Tamaño de conjunto residente de memoria Enorme Memoria total Memoria anónima activa Total Memoria de archivo activa Total Memoria caché Total Memoria anónima inactiva Total Memoria de archivo inactiva Total Memoria de archivo asignado Total Memoria de archivo asignado Total Fallo de página de memoria Total Fallo mayor de página de memoria Total paginada de entrada Memoria total paginada de salida Memoria total Tamaño de conjunto residente Total de memoria Tamaño de conjunto residente Enorme Memoria total Memoria no desalojable Uso de memoria no desalojable Porcentaje de uso de memoria Código de salida OOM PID eliminado Iniciado en racha de fallos 


| E/S de bloque de contenedor Docker | Espacio de nombres Nombre del contenedor Dispositivo Docker Motor | Hash de contenedor de Kubernetes Puertos de contenedor de Kubernetes Conteo de reinicios de contenedor de Kubernetes Ruta de mensaje de terminación de contenedor de Kubernetes Política de mensaje de terminación de contenedor de Kubernetes Período de gracia de terminación de pod de Kubernetes Imagen de contenedor Estado de contenedor Versión de contenedor Nombre de nodo Ruta de registro de contenedor de Kubernetes Nombre de contenedor de Kubernetes Tipo de Docker de Kubernetes Nombre de pod de Kubernetes Espacio de nombres de pod de Kubernetes UID de pod de Kubernetes ID de Sandbox de Kubernetes IP de nodo UUID de nodo Versión de Docker Configuración de Kubernetes vista Origen de configuración de Kubernetes OpenShift SCC Kubernetes Descripción Nombre para mostrar de Kubernetes Etiquetas de OpenShift Esquema Versión de esquema Hash de plantilla de pod Controlador Revisión Generación de plantilla de pod de hash Esquema de servicio Kompose Fecha de compilación Licencia de esquema Nombre de esquema Proveedor de esquema Pod de cliente Conjunto de estado de Kubernetes Nombre de pod Inquilino Fecha de compilación de Webconsole Proveedor de licencia Arquitectura URL de origen autorizada Host de compilación de RH Componente de RH Distribución Ámbito Instalar Mantenedor Resumen de ejecución de lanzamiento Desinstalar Referencia de VCS Tipo de VCS Esquema de versión Esquema de URL VCS Esquema de URL Versión ID del contenedor | Bytes de servicio de E/S recursivos asíncronos Bytes de servicio de E/S recursivos Lectura Bytes de servicio de E/S recursivos síncronos Bytes de servicio de E/S recursivos Total Bytes de servicio de E/S recursivos Escritura E/S con servicio recursivo asíncrono Lectura recursiva E/S con servicio recursivo síncrono Total E/S con servicio recursivo Escritura recursiva 


| Red de contenedores Docker | Espacio de nombres Nombre del contenedor Red Motor Docker | Imagen del contenedor Estado del contenedor Versión del contenedor Nombre del nodo IP del nodo UUID del nodo Sistema operativo del nodo Clúster K8s Versión de Docker ID del contenedor | Bytes de RX descartados Bytes de RX Errores de RX Paquetes de RX Bytes de TX descartados Bytes de TX Errores de TX Paquetes de TX 


| CPU de contenedor Docker | Espacio de nombres Nombre del contenedor CPU Motor Docker | Hash de contenedor de Kubernetes Puertos de contenedor de Kubernetes Conteo de reinicios de contenedor de Kubernetes Ruta de mensaje de terminación de contenedor de Kubernetes Política de mensaje de terminación de contenedor de Kubernetes Período de gracia de terminación de pod de Kubernetes Configuración de Kubernetes vista Origen de la configuración de Kubernetes Imagen de contenedor de SCC de OpenShift Estado del contenedor Versión del contenedor Nombre del nodo Ruta de registro de contenedor de Kubernetes Nombre del contenedor de Kubernetes Tipo de Docker de Kubernetes Nombre del pod de Kubernetes Espacio de nombres del pod de Kubernetes UID del pod de Kubernetes ID de Sandbox de Kubernetes IP del nodo UUID del nodo Sistema operativo del nodo Versión de Docker del clúster de Kubernetes Descripción de Kubernetes Nombre para mostrar de Kubernetes Etiquetas de OpenShift Versión del esquema Hash de plantilla de pod Revisión del controlador Generación de plantilla de pod de hash Esquema de servicio Kompose Fecha de compilación Licencia del esquema Nombre del esquema Proveedor del esquema Pod del cliente Nombre del pod de StatefulSet de Kubernetes Fecha de compilación de Webconsole Proveedor de licencia Arquitectura URL de origen autorizada Host de compilación de RH Componente de RH Distribución Ámbito Instalar Mantenedor Resumen de ejecución de lanzamiento Desinstalar VCS Ref Tipo de VCS Versión Esquema URL Esquema URL de VCS Versión del esquema ID del contenedor | Periodos de limitación Periodos de limitación Tiempo de limitación Uso en modo kernel Uso en modo usuario Porcentaje de uso Uso del sistema Total 
|===


== Solución de problemas

[cols="2*"]
|===
| Problema: | Prueba esto: 


| No veo mis métricas de Docker en Data Infrastructure Insights después de seguir las instrucciones en la página de configuración. | Consulte los registros del agente Telegraf para ver si informa el siguiente error: E!  Error en el complemento [inputs.docker]: Se denegó el permiso al intentar conectarse al socket del demonio Docker. Si es así, tome las medidas necesarias para proporcionar al agente Telegraf acceso al socket Unix de Docker como se especificó anteriormente. 
|===
Información adicional se puede encontrar en ellink:concept_requesting_support.html["Soporte"] página.
