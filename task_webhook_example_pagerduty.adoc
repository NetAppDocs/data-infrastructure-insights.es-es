---
sidebar: sidebar 
permalink: task_webhook_example_pagerduty.html 
keywords: webhook, notification, PagerDuty, integration 
summary: Cree un webhook para alertar sobre los umbrales de rendimiento o inventario para Pagerduty 
---
= Ejemplo de webhook para PagerDuty
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Los webhooks permiten a los usuarios enviar notificaciones de alerta a varias aplicaciones utilizando un canal webhook personalizado.  Esta página proporciona un ejemplo para configurar webhooks para PagerDuty.


NOTE: Esta página hace referencia a instrucciones de terceros, que podrían estar sujetas a cambios.  Consulte lalink:https://support.pagerduty.com/docs/services-and-integrations["Documentación de PagerDuty"] para obtener la información más actualizada.



== Configuración de PagerDuty:

. En PagerDuty, navegue a *Servicios > Directorio de servicios* y haga clic en el botón *+Nuevo servicio*
. Ingrese un _Nombre_ y seleccione _Usar nuestra API directamente_.  Haga clic en _Agregar servicio_.
+
image:Webhooks_PagerDutyScreen1.png["Pantalla de servicio de buscapersonas"]

. Haga clic en la pestaña _Integraciones_ para ver la *Clave de integración*.  Necesitará esta clave cuando cree el webhook de Data Infrastructure Insights a continuación.


. Vaya a *Incidentes* o *Servicios* para ver las alertas.
+
image:Webhooks_PagerDutyScreen2.png["Pantalla de servicio de buscapersonas"]





== Crear webhook de Data Infrastructure Insights :

. En Data Infrastructure Insights, navegue a *Admin > Notificaciones* y seleccione la pestaña *Webhooks*.  Haga clic en *+Webhook* para crear un nuevo webhook.
. Dale al webhook un nombre significativo, como por ejemplo "PagerDuty Trigger".  Utilizará este webhook para eventos de nivel crítico y de advertencia.
. En el menú desplegable _Tipo de plantilla_, seleccione *PagerDuty*.


. Cree un parámetro secreto personalizado llamado _routingKey_ y establezca el valor en el valor _Integration Key_ de PagerDuty mencionado anteriormente.
+
image:Webhooks_Custom_Secret_Routing_Key.png["Configuración de la clave de enrutamiento"]



Repita estos pasos para crear un webhook "PagerDuty Resolve" para eventos resueltos.



== Mapeo de campos de PagerDuty para Data Infrastructure Insights

La siguiente tabla e imagen muestran la asignación de campos entre PagerDuty y Data Infrastructure Insights:

[cols="<,<"]
|===
| PagerDuty | Data Infrastructure Insights 


| Tecla de alerta | ID de alerta 


| Fuente | Activado en 


| Componente | Nombre de la métrica 


| Grupo | Tipo de objeto 


| Clase | Nombre del monitor 
|===
image:Webhooks-PagerDuty_Fields.png["Campos de PagerDuty en CI"]



== Notificaciones mediante webhook

Para notificar eventos a través de un webhook, en Data Infrastructure Insights navegue a *Alertas > Monitores* y haga clic en *+Monitor* para crear un nuevolink:task_create_monitor.html["supervisión"] .

* Seleccione una métrica y defina las condiciones del monitor.
* En _Configurar notificaciones del equipo_, seleccione el Método de entrega *Webhook*.
* Seleccione el webhook “PagerDuty Trigger” para eventos de nivel crítico y de advertencia.
* Seleccione “PagerDuty Resolve” para eventos resueltos.
+
image:Webhooks_Notifications.png["Notificaciones de webhook"]




NOTE: Una buena práctica es configurar notificaciones separadas para eventos desencadenantes y eventos resueltos, ya que PagerDuty maneja los eventos desencadenantes de manera diferente a los eventos resueltos.
