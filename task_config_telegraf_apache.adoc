---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configuración del recopilador de datos Apache 
---
= Recopilador de datos Apache
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Este recopilador de datos permite la recopilación de datos de los servidores Apache en su inquilino.

.Prerrequisitos
* Debe tener su servidor HTTP Apache configurado y funcionando correctamente
* Debe tener permisos de sudo o administrador en su host/VM del agente
* Normalmente, el módulo Apache _mod_status_ está configurado para exponer una página en la ubicación '/server-status?auto' del servidor Apache.  La opción _ExtendedStatus_ debe estar habilitada para recopilar todos los campos disponibles.  Para obtener información sobre cómo configurar su servidor, consulte la documentación del módulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Instalación

. Desde *Observabilidad > Recopiladores*, haga clic en *+Recopilador de datos*.  Elija Apache.
+
Seleccione el sistema operativo o la plataforma en la que está instalado el agente Telegraf.

. Si aún no ha instalado un Agente para la recopilación, o desea instalar un Agente para un Sistema operativo o Plataforma diferente, haga clic en _Mostrar instrucciones_ para expandir lalink:task_config_telegraf_agent.html["Instalación del agente"] instrucciones.
. Seleccione la clave de acceso del agente para utilizarla con este recopilador de datos.  Puede agregar una nueva clave de acceso de agente haciendo clic en el botón *+ Clave de acceso de agente*.  Práctica recomendada: utilice una clave de acceso de agente diferente solo cuando desee agrupar recopiladores de datos, por ejemplo, por sistema operativo o plataforma.
. Siga los pasos de configuración para configurar el recopilador de datos.  Las instrucciones varían según el tipo de sistema operativo o plataforma que esté utilizando para recopilar datos.


image:ApacheDCConfigLinux.png["Configuración de Apache"]



== Configuración

El complemento de Telegraf para el servidor HTTP de Apache depende de que el módulo 'mod_status' esté habilitado.  Cuando esta opción está habilitada, el servidor HTTP de Apache expondrá un punto final HTML que puede verse en su navegador o extraerse para conocer el estado de toda la configuración del servidor HTTP de Apache.



=== Compatibilidad:

La configuración se desarrolló con la versión 2.4.38 del servidor HTTP Apache.



=== Habilitando mod_status:

Habilitar y exponer los módulos 'mod_status' implica dos pasos:

* Módulo de habilitación
* Exponiendo estadísticas del módulo




=== Módulo habilitador:

La carga de módulos está controlada por el archivo de configuración en '/usr/local/apache/conf/httpd.conf'.  Edite el archivo de configuración y descomente las siguientes líneas:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Exponiendo estadísticas del módulo:

La exposición de 'mod_status' está controlada por el archivo de configuración en '/usr/local/apache2/conf/extra/httpd-info.conf'.  Asegúrate de tener lo siguiente en ese archivo de configuración (al menos, las otras directivas estarán allí):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Para obtener instrucciones detalladas sobre el módulo 'mod_status', consulte lalink:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentación de Apache"]



== Objetos y contadores

Se recogen los siguientes objetos y sus contadores:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Puntos de datos: 


| apache | Servidor de espacio de nombres | IP del nodo Nombre del nodo Puerto Configuración del servidor principal Generación de MPM del servidor principal El tiempo de actividad del servidor se está deteniendo | Trabajadores ocupados Bytes por solicitud Bytes por segundo CPU hijos Sistema CPU hijos Usuario CPU Carga CPU Sistema CPU Usuario Conexiones asincrónicas Cerrando conexiones asincrónicas Mantener activas Conexiones asincrónicas Escribiendo conexiones Duración total por solicitud Trabajadores inactivos Carga promedio (último 1 m) Carga promedio (últimos 15 m) Carga promedio (últimos 5 m) Procesos Solicitudes por segundo Accesos totales Duración total Total KBytes Marcador Cerrando Marcador Búsquedas DNS Marcador Finalizando Marcador Limpieza inactiva Marcador Mantener activas Marcador Registro Marcador Abierto Marcador Leyendo Marcador Enviando Marcador Iniciando Marcador Esperando 
|===


== Solución de problemas

Información adicional se puede encontrar en ellink:concept_requesting_support.html["Soporte"] página.
