---
sidebar: sidebar 
permalink: ws_webhook_example_teams.html 
keywords: webhook, notification, Microsoft, Teams, integration 
summary: Cree un webhook de seguridad de carga de trabajo para Microsoft Teams para alertar sobre seguridad 
---
= Ejemplo de webhook de seguridad de carga de trabajo para Microsoft Teams
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Los webhooks permiten a los usuarios enviar notificaciones de alerta a varias aplicaciones utilizando un canal webhook personalizado.  Esta página proporciona un ejemplo para configurar webhooks para Teams.


NOTE: Esta página hace referencia a instrucciones de terceros, que están sujetas a cambios.  Consulte lalink:https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook["Documentación de Teams"] para obtener la información más actualizada.



== Configuración de los equipos:

. En Teams, seleccione el kebab y busque Webhook entrante.
+
image:Webhooks_Teams_Create_Webhook.png["Webhook entrante en Teams"]

. Seleccione *Agregar a un equipo > Seleccionar un equipo > Configurar un conector*.
. Copiar la URL del webhook.  Necesitará pegar esto en la configuración del webhook de seguridad de carga de trabajo.




== Crear webhook de equipos de seguridad de carga de trabajo:

. Vaya a Admin > Notificaciones y seleccione la pestaña _“Webhooks de seguridad de carga de trabajo_.  Seleccione _+ Webhook_ para crear un nuevo webhook.
. Dale al webhook un nombre significativo.
. En el menú desplegable _Tipo de plantilla_, seleccione *Equipos*.
+
image:ws_webhook_teams_example.png["Ejemplo de webhook de equipos de seguridad de carga de trabajo"]

. Pegue la URL de arriba en el campo _URL_.




=== Pasos para crear una notificación de Teams con la plantilla de tarjeta adaptable

. Reemplaza el cuerpo del mensaje con la siguiente plantilla:
+
....
  {
  "type": "message",
  "attachments": [
    {
      "contentType": "application/vnd.microsoft.card.adaptive",
      "content": {
        "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
        "type": "AdaptiveCard",
        "version": "1.2",
        "body": [
          {
            "type": "TextBlock",
            "text": "%%severity%% Alert: %%synopsis%%",
            "wrap": true,
            "weight": "Bolder",
            "size": "Large"
          },
          {
            "type": "TextBlock",
            "text": "%%detected%%",
            "wrap": true,
            "isSubtle": true,
            "spacing": "Small"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "User",
                "value": "%%userName%%"
              },
              {
                "title": "Attack/Abnormal Behavior",
                "value": "%%type%%"
              },
              {
                "title": "Action taken",
                "value": "%%actionTaken%%"
              },
              {
                "title": "Files encrypted",
                "value": "%%filesEncrypted%%"
              },
              {
                "title": "Encrypted files suffix",
                "value": "%%encryptedFilesSuffix%%"
              },
              {
                "title": "Files deleted",
                "value": "%%filesDeleted%%"
              },
              {
                "title": "Activity Change Rate",
                "value": "%%changePercentage%%"
              },
              {
                "title": "Severity",
                "value": "%%severity%%"
              },
              {
                "title": "Status",
                "value": "%%status%%"
              },
              {
                "title": "Notes",
                "value": "%%note%%"
              }
            ]
          }
        ],
        "actions": [
          {
            "type": "Action.OpenUrl",
            "title": "View Details",
            "url": "https://%%cloudInsightsHostname%%/%%alertDetailsPageUrl%%"
          }
        ]
      }
    }
  ]
}
....
. Si usas Power Automate Flows, los parámetros de consulta en la URL están en formato codificado. Debes descodificar la URL antes de ingresarla.
. Haz clic en "Probar Webhook" para asegurarte de que no hay errores.
. Guarda el webhook.




== Notificaciones mediante webhook

Para notificar eventos a través de webhook, navegue a _Seguridad de carga de trabajo > Políticas_.  Seleccione _+Política de ataque_ o _+Política de advertencia_.

* Introduzca un nombre de política significativo.
* Seleccione los tipos de ataque requeridos, los dispositivos a los que se debe adjuntar la política y las acciones requeridas.
* En el menú desplegable _Notificaciones de webhooks_, seleccione los webhooks de Teams necesarios. Guardar la política.


Nota: Los webhooks también se pueden adjuntar a políticas existentes editándolas.

image:ws_add_attack_policy.png["Agregar cuadro de diálogo de política de ataque que muestra el webhook"]
