---
sidebar: sidebar 
permalink: ws_notifications_using_webhooks.html 
keywords: alert, webhook, notification 
summary: Cree un webhook para notificaciones de alerta de seguridad de carga de trabajo. 
---
= Notificaciones de seguridad de la carga de trabajo mediante webhooks
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Los webhooks permiten a los usuarios enviar notificaciones de alerta críticas o de advertencia a varias aplicaciones utilizando un canal webhook personalizado.

Muchas aplicaciones comerciales admiten webhooks como interfaz de entrada estándar, por ejemplo: Slack, PagerDuty, Teams y Discord.  Al admitir un canal webhook genérico y personalizable, Workload Security puede admitir muchos de estos canales de entrega.  Puede encontrar información sobre la configuración de los webhooks en los sitios web de las respectivas aplicaciones.  Por ejemplo, Slack ofrecelink:https://api.slack.com/messaging/webhooks["Esta útil guía"] .

Puede crear múltiples canales webhook, cada uno destinado a un propósito diferente, aplicaciones independientes, diferentes destinatarios, etc.

La instancia del canal webhook se compone de los siguientes elementos

|===
| Nombre | Descripción 


| URL | URL de destino del webhook, incluido el prefijo http:// o https:// junto con los parámetros de la URL 


| Método | GET/POST - El valor predeterminado es POST 


| Encabezado personalizado | Especifique aquí cualquier encabezado personalizado 


| Cuerpo del mensaje | Coloque el cuerpo de su mensaje aquí 


| Parámetros de alerta predeterminados | Enumera los parámetros predeterminados para el webhook 


| Parámetros y secretos personalizados | Los parámetros y secretos personalizados le permiten agregar parámetros únicos y elementos seguros como contraseñas. 
|===


== Creando un webhook

Para crear un webhook de seguridad de carga de trabajo, vaya a Admin > Notificaciones y seleccione la pestaña “Webhooks de seguridad de carga de trabajo”.  La siguiente imagen muestra un ejemplo de pantalla de creación de webhook de Slack.

Nota: El usuario debe ser un _Admin_ de seguridad de carga de trabajo para poder crear y administrar webhooks de seguridad de carga de trabajo.

image:ws_webhook_slack_example.png["Ejemplo de webhook de Slack para seguridad de carga de trabajo, ancho = 500"]

* Ingrese la información adecuada para cada uno de los campos y haga clic en "Guardar".
* También puede hacer clic en el botón "Probar webhook" para probar la conexión.  Tenga en cuenta que esto enviará el "Cuerpo del mensaje" (sin sustituciones) a la URL definida según el método seleccionado.
* Los webhooks de SWS comprenden una serie de parámetros predeterminados.  Además, puedes crear tus propios parámetros o secretos personalizados.




== Parámetros: ¿Qué son y cómo utilizarlos?

Los parámetros de alerta son valores dinámicos que se completan por cada alerta.  Por ejemplo, el parámetro _%%severity%%_ se reemplazará con el tipo de gravedad de la alerta.

Tenga en cuenta que no se realizan sustituciones al hacer clic en el botón "Probar webhook"; la prueba envía una carga útil que muestra los marcadores de posición del parámetro (_%%<param-name>%%_) pero no los reemplaza con datos.



=== Parámetros y secretos personalizados

En esta sección puedes agregar cualquier parámetro personalizado y/o secretos que desees.  Un parámetro personalizado o secreto puede estar en la URL o en el cuerpo del mensaje.  Los secretos permiten al usuario configurar un parámetro personalizado seguro como contraseña, apiKey, etc.

La siguiente imagen de muestra muestra cómo se utilizan los parámetros personalizados en la creación de webhooks.

image:ws_webhook_parameters_example.png["Webhook de seguridad de carga de trabajo con parámetros, ancho=800"]



== Página de lista de webhooks de seguridad de carga de trabajo

En la página de lista de Webhooks, se muestran los campos Nombre, Creado por, Creado el, Estado, Seguro y Último informe.  Nota: El valor de la columna 'estado' seguirá cambiando según el resultado del último activador del webhook.  Los siguientes son ejemplos de resultados de estado.

|===


| Estado | Descripción 


| DE ACUERDO | Notificación enviada exitosamente. 


| 403 | Prohibido. 


| 404 | URL no encontrada. 


| 400  a| 
Solicitud incorrecta.  Es posible que vea este estado si hay algún error en el cuerpo del mensaje, por ejemplo:

* Json mal formateado.
* Proporcionar valor no válido para claves reservadas.  Por ejemplo, PagerDuty solo acepta información/advertencia/error/crítico para “Gravedad”.  Cualquier otro resultado puede producir un estado 400.
* Errores de validación específicos de la aplicación.  Por ejemplo, Slack permite un máximo de 10 campos dentro de una sección.  Incluir más de 10 puede dar como resultado un estado 400.




| 410 | El recurso ya no está disponible 
|===
La columna “Último informe” indica el momento en que se activó el webhook por última vez.

Desde la página de listado de webhooks, los usuarios también pueden editar, duplicar y eliminar webhooks.



== Configurar la notificación de webhook en la política de alertas

Para agregar una notificación de webhook a una política de alerta, vaya a -Seguridad de carga de trabajo > Políticas- y seleccione una política existente o agregue una nueva.  En la sección _Acciones_ > menú desplegable _Notificaciones de webhook_, seleccione los webhooks necesarios.

image:ws_edit_attack_policy.png["Cuadro de diálogo Editar política de ataque que muestra el menú desplegable del webhook, ancho=500"]

Las notificaciones de webhook están vinculadas a las políticas.  Cuando ocurre el ataque (RW/DD/WARN), se tomará la acción configurada (Tomar instantánea/bloqueo de usuario) y luego se activará la notificación de webhook asociada.

Nota: Las notificaciones por correo electrónico son independientes de las políticas y se activarán como de costumbre.

* Si se pausa una política, no se activarán las notificaciones de webhook.
* Se pueden adjuntar varios webhooks a una sola política, pero se recomienda no adjuntar más de 5 webhooks a una política.




=== Ejemplos de webhooks de seguridad de carga de trabajo

Webhooks paralink:ws_webhook_example_slack.html["Flojo"]

Webhooks paralink:ws_webhook_example_pagerduty.html["PagerDuty"] Webhooks paralink:ws_webhook_example_teams.html["Equipos"] Webhooks paralink:ws_webhook_example_discord.html["Discordia"]
